<%= turbo_frame_tag "feedback-form" do %>
  <div class="rounded p-4 border" style="background-color: rgba(248, 246, 242, 0.3);">
    <%= form_for @avaliacao do |f| %>
      <table class="table table-hover mb-4">
        <thead>
          <tr>
            <th>Avaliação</th>
            <% (1..5).each do |nota| %>
              <td class="text-muted"><%= nota %></td>
            <% end %>
          </tr>
        </thead>

        <tbody>
          <% [:responsabilidade, :comprometimento, :produtividade, :atendimento_humanizado].each do |criterio| %>
            <tr>
              <td><%= criterio.to_s.humanize %></td>
              <% (1..5).each do |nota| %>
                <td><%= f.radio_button criterio, nota %></td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>

    <%= form_for [@participacao, @feedback] do |f| %>
      <details class="mb-3">
        <summary>Modelo</summary>
        <p>Alinhamento inicial/quebra gelo: escrever o parecer geral de como foram os três meses, ressaltando que a conversa se refere a esse período.</p>
      </details>

      <%= f.text_area :mensagem, class: "form-control", placeholder: "Seu feedback..." %>

      <div class="d-grid pt-2">
        <%= f.submit "Registrar avaliação", class: "btn btn-primary", data: { controller: "confetti", action: "confetti#shoot" } %>
      </div>
    <% end %>
  </div>
<% end %>
